<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mira â€” AI Assistant</title>
    <link rel="stylesheet" href="./styles.css" />

    <!-- Prevent the example fetch inside api_usage.js from running on load by temporarily stubbing fetch -->
    <script>
      // Save original fetch and replace with a noop to avoid the placeholder call in api_usage.js executing.
      window.__originalFetch = window.fetch;
      window.fetch = async function () {
        return { ok: false, status: 0, json: async () => ({}) };
      };
    </script>

    <script src="./api_usage.js"></script>

    <script>
      // Restore real fetch after loading api_usage.js
      if (window.__originalFetch) {
        window.fetch = window.__originalFetch;
        delete window.__originalFetch;
      }
    </script>
  </head>
  <body>
    <header class="topbar" role="banner">
      <div class="topbar-inner container" style="justify-content:center;">
        <div class="brand">
          <span class="logo">Mira</span>
        </div>
      </div>
    </header>
    <div id="status" class="status" aria-live="polite">Ready</div>

    <main class="app" role="main">
      <div class="chat-shell">
        <section class="chat-panel" aria-label="Chat with Mira">
          <div class="chat-main container">
            <div id="chatWindow" class="chat-window" role="log" aria-live="polite" aria-relevant="additions"></div>
          </div>

          <form id="chatForm" class="chat-form" autocomplete="off" role="search">
            <label for="chatInput" class="sr-only">Message</label>
            <textarea id="chatInput" name="message" rows="1" placeholder="Ask Mira about marketing, branding, or growth..." inputmode="text" autocapitalize="sentences" spellcheck="true" aria-label="Message input"></textarea>
            <button id="sendBtn" type="submit" class="btn-send" aria-label="Send message">
              <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="none" d="M0 0h24v24H0z"/><path d="M2 21l21-9L2 3v7l15 2-15 2v7z" fill="#fff"/></svg>
            </button>
          </form>
          <div id="toast" aria-live="assertive" class="toast" hidden></div>
        </section>
      </div>
    </main>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module" src="./script.js"></script>
  </body>
</html>
